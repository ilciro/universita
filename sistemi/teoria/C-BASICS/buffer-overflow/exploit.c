
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char* passwd = "francesco";

void passwd_file_print() {
    FILE *file = fopen("/etc/passwd", "r");
    if (file == NULL) {
        perror("Error opening /etc/passwd");
    	exit(0);
    }

    char line[256];
    while (fgets(line, sizeof(line), file)) {
        printf("%s", line);
    }

    fclose(file);
    exit(0);
}

void get_and_check_passwd(){
    	unsigned int v[16]; //used in this example as a char buffer

	scanf("%s",(char*)v);
	printf("inserted passwd is: %s\n",(char*)v);
	if(strcmp((char*)v,passwd) == 0) {
		printf("passwd is correct - here is the passwd file\n");
		passwd_file_print();
	}
	else{
		printf("sorry your passwd is not correct, the passwd file will not show up\n");
		fflush(stdout);
	}
}


int main() {

  printf("you need a correct passwd to access the passwd file\n");
  get_and_check_passwd();

  return 0;
}



